<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#dc2626">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Bayern Tickets">
    <title>FC Bayern Ticketverteilung 25/26</title>
    <link rel="manifest" href="manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * { -webkit-tap-highlight-color: transparent; }
        body { overscroll-behavior-y: contain; }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useMemo } = React;
        
        // Lucide Icons
        const Search = (props) => (<svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>);
        const Calendar = (props) => (<svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>);
        const Users = (props) => (<svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>);
        const Award = (props) => (<svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></svg>);
        const Filter = (props) => (<svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/></svg>);
        const Clock = (props) => (<svg {...props} fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>);
        
        const BayernTicketDashboard = () => {
            const [searchTerm, setSearchTerm] = useState('');
            const [selectedCompetition, setSelectedCompetition] = useState('all');
            const [showFilters, setShowFilters] = useState(false);
            
            const avatarMap = {
                'Franz Weiß': 'avatars/franz.jpg',
                'Beate Weiß': 'avatars/beate.jpg',
                'Sebastian Weiß': 'avatars/sebastian.jpg',
                'Alexander Claves': 'avatars/claves.jpg',
                'Ralf Erhart': 'avatars/ralf.jpg',
                'Ruben Lynen': 'avatars/ruben.jpg',
                'Alex Majewski': 'avatars/alex.jpg',
                'Sophia Reif': 'avatars/sophia.jpg'
            };
            
            const getBadge = (opponent) => {
                const badges = {
                    'RB Leipzig': 'https://upload.wikimedia.org/wikipedia/en/0/04/RB_Leipzig_2014_logo.svg',
                    'Hamburger SV': 'https://upload.wikimedia.org/wikipedia/commons/6/66/HSV-Logo.svg',
                    'Werder Bremen': 'https://upload.wikimedia.org/wikipedia/commons/b/be/SV-Werder-Bremen-Logo.svg',
                    'Borussia Dortmund': 'https://upload.wikimedia.org/wikipedia/commons/6/67/Borussia_Dortmund_logo.svg',
                    'Bayer 04 Leverkusen': 'https://upload.wikimedia.org/wikipedia/de/f/f7/Bayer_Leverkusen_Logo.svg',
                    'SC Freiburg': 'https://upload.wikimedia.org/wikipedia/de/f/f1/SC-Freiburg_Logo-neu.svg',
                    'FC St. Pauli': 'https://upload.wikimedia.org/wikipedia/commons/e/e8/Logo_FC_St._Pauli.svg',
                    'FSV Mainz 05': 'https://upload.wikimedia.org/wikipedia/commons/9/9e/Logo_Mainz_05.svg',
                    'VfL Wolfsburg': 'https://upload.wikimedia.org/wikipedia/commons/f/f3/Logo-VfL-Wolfsburg.svg',
                    'FC Augsburg': 'https://upload.wikimedia.org/wikipedia/de/b/b7/FC_Augsburg_logo.svg',
                    'TSG 1899 Hoffenheim': 'https://upload.wikimedia.org/wikipedia/commons/6/64/TSG_1899_Hoffenheim_logo.svg',
                    'Eintracht Frankfurt': 'https://upload.wikimedia.org/wikipedia/commons/0/04/Eintracht_Frankfurt_Logo.svg',
                    'Bor. Mönchengladbach': 'https://upload.wikimedia.org/wikipedia/commons/8/81/Borussia_M%C3%B6nchengladbach_logo.svg',
                    'Union Berlin': 'https://upload.wikimedia.org/wikipedia/commons/4/44/FC_Union_Berlin_Logo.svg',
                    'VfB Stuttgart': 'https://upload.wikimedia.org/wikipedia/commons/e/eb/VfB_Stuttgart_1893_Logo.svg',
                    '1. FC Heidenheim': 'https://upload.wikimedia.org/wikipedia/commons/e/e2/1._FC_Heidenheim_1846_logo.svg',
                    '1. FC Köln': 'https://upload.wikimedia.org/wikipedia/en/1/16/1._FC_K%C3%B6ln_logo.svg',
                    'FC Chelsea': 'https://upload.wikimedia.org/wikipedia/en/c/cc/Chelsea_FC.svg',
                    'Club Brügge': 'https://upload.wikimedia.org/wikipedia/en/d/d0/Club_Brugge_KV_logo.svg',
                    'Sporting Lissabon': 'https://upload.wikimedia.org/wikipedia/en/3/3e/Sporting_Clube_de_Portugal_%28Logo%29.svg',
                    'Union Saint-Gilloise': 'https://upload.wikimedia.org/wikipedia/en/e/e4/Royale_Union_Saint-Gilloise_logo.svg'
                };
                return badges[opponent] || null;
            };
            
            const matches = [
                { id: 1, date: '2025-08-23', opponent: 'RB Leipzig', competition: 'Bundesliga', user: 'Franz Weiß', status: 'upcoming', round: 1 },
                { id: 2, date: '2025-08-30', opponent: 'Hamburger SV', competition: 'Bundesliga', user: 'Beate Weiß & Franz Weiß', status: 'upcoming', round: 2 },
                { id: 3, date: '2025-09-13', opponent: 'Werder Bremen', competition: 'Bundesliga', user: 'Dominik Lutz', status: 'upcoming', round: 3 },
                { id: 4, date: '2025-09-20', opponent: 'Borussia Dortmund', competition: 'Bundesliga', user: 'Christoph Hoffmann & Franz Weiß', status: 'upcoming', round: 4 },
                { id: 5, date: '2025-09-27', opponent: 'Bayer 04 Leverkusen', competition: 'Bundesliga', user: 'Sebastian Weiß & Alexander Claves', status: 'upcoming', round: 5 },
                { id: 6, date: '2025-10-04', opponent: 'SC Freiburg', competition: 'Bundesliga', user: 'Sophia Reif', status: 'upcoming', round: 6 },
                { id: 7, date: '2025-10-18', opponent: 'FC St. Pauli', competition: 'Bundesliga', user: 'Danny Westermaier', status: 'upcoming', round: 7 },
                { id: 8, date: '2025-10-25', opponent: 'FSV Mainz 05', competition: 'Bundesliga', user: 'Ralf Erhart', status: 'upcoming', round: 8 },
                { id: 9, date: '2025-11-01', opponent: 'VfL Wolfsburg', competition: 'Bundesliga', user: 'Max Kalkusch', status: 'upcoming', round: 9 },
                { id: 10, date: '2025-11-08', opponent: 'FC Augsburg', competition: 'Bundesliga', user: 'Michael Lederer', status: 'upcoming', round: 10 },
                { id: 11, date: '2025-11-22', opponent: 'TSG 1899 Hoffenheim', competition: 'Bundesliga', user: 'Dora Skrybus-Loy', status: 'upcoming', round: 11 },
                { id: 12, date: '2025-11-29', opponent: 'Eintracht Frankfurt', competition: 'Bundesliga', user: 'Tom Petri', status: 'upcoming', round: 12 },
                { id: 13, date: '2025-12-06', opponent: 'Bor. Mönchengladbach', competition: 'Bundesliga', user: 'Ruben Lynen', status: 'upcoming', round: 13 },
                { id: 14, date: '2025-12-13', opponent: 'Union Berlin', competition: 'Bundesliga', user: 'Alex Majewski', status: 'upcoming', round: 14 },
                { id: 15, date: '2025-12-20', opponent: 'VfB Stuttgart', competition: 'Bundesliga', user: 'Tim Schwarzmaier', status: 'upcoming', round: 15 },
                { id: 16, date: '2026-01-17', opponent: '1. FC Heidenheim', competition: 'Bundesliga', user: 'Stefan Wintershoff', status: 'upcoming', round: 16 },
                { id: 17, date: '2026-05-17', opponent: '1. FC Köln', competition: 'Bundesliga', user: 'Annika Schnell', status: 'upcoming', round: 34 },
                { id: 18, date: '2025-09-17', opponent: 'FC Chelsea', competition: 'Champions League', user: 'Warteliste', status: 'waitlist', round: 'MD1' },
                { id: 19, date: '2025-10-01', opponent: 'Club Brügge', competition: 'Champions League', user: 'Warteliste', status: 'waitlist', round: 'MD2' },
                { id: 20, date: '2025-11-26', opponent: 'Sporting Lissabon', competition: 'Champions League', user: 'Warteliste', status: 'waitlist', round: 'MD5' },
                { id: 21, date: '2026-01-22', opponent: 'Union Saint-Gilloise', competition: 'Champions League', user: 'Warteliste', status: 'waitlist', round: 'MD7' }
            ];
            
            const getAvatar = (userName) => {
                const names = userName.split(' & ');
                if (names.length === 2) {
                    return (
                        <div className="flex -space-x-2">
                            {names.map((name, idx) => (
                                <img
                                    key={idx}
                                    src={avatarMap[name.trim()] || 'avatars/placeholder.jpg'}
                                    alt={name}
                                    className="w-12 h-12 rounded-full border-2 border-gray-200 object-cover"
                                    style={{ zIndex: names.length - idx }}
                                />
                            ))}
                        </div>
                    );
                }
                return <img src={avatarMap[userName] || 'avatars/placeholder.jpg'} alt={userName} className="w-12 h-12 rounded-full border-2 border-gray-200 object-cover" />;
            };
            
            const filteredMatches = useMemo(() => {
                return matches.filter(match => {
                    const matchesSearch = match.opponent.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                        match.user.toLowerCase().includes(searchTerm.toLowerCase());
                    const matchesCompetition = selectedCompetition === 'all' || match.competition === selectedCompetition;
                    return matchesSearch && matchesCompetition;
                });
            }, [searchTerm, selectedCompetition]);
            
            const stats = useMemo(() => ({
                totalMatches: matches.length,
                bundesliga: matches.filter(m => m.competition === 'Bundesliga').length,
                championsLeague: matches.filter(m => m.competition === 'Champions League').length,
                assigned: matches.filter(m => m.status === 'upcoming').length,
                waitlist: matches.filter(m => m.status === 'waitlist').length
            }), []);
            
            const formatDate = (dateStr) => {
                return new Date(dateStr).toLocaleDateString('de-DE');
            };
            
            return (
                <div className="min-h-screen bg-gradient-to-br from-red-50 via-white to-red-50">
                    <div className="max-w-7xl mx-auto p-4 pb-20">
                        <div className="bg-gradient-to-r from-red-600 to-red-700 text-white rounded-2xl p-6 mb-6 shadow-xl">
                            <div className="flex items-center gap-3 mb-4">
                                <Award className="w-10 h-10" />
                                <div>
                                    <h1 className="text-2xl font-bold">FC Bayern München</h1>
                                    <p className="text-red-100">Ticketverteilung Saison 25/26</p>
                                </div>
                            </div>
                            <div className="grid grid-cols-2 gap-3 mt-4">
                                <div className="bg-white/10 backdrop-blur rounded-lg p-3">
                                    <div className="text-3xl font-bold">{stats.bundesliga}</div>
                                    <div className="text-sm text-red-100">Bundesliga</div>
                                </div>
                                <div className="bg-white/10 backdrop-blur rounded-lg p-3">
                                    <div className="text-3xl font-bold">{stats.championsLeague}</div>
                                    <div className="text-sm text-red-100">Champions League</div>
                                </div>
                                <div className="bg-white/10 backdrop-blur rounded-lg p-3">
                                    <div className="text-3xl font-bold">{stats.assigned}</div>
                                    <div className="text-sm text-red-100">Vergeben</div>
                                </div>
                                <div className="bg-white/10 backdrop-blur rounded-lg p-3">
                                    <div className="text-3xl font-bold">{stats.waitlist}</div>
                                    <div className="text-sm text-red-100">Warteliste</div>
                                </div>
                            </div>
                        </div>

                        <div className="bg-white rounded-xl shadow-lg p-4 mb-6">
                            <div className="flex gap-2 mb-3">
                                <div className="flex-1 relative">
                                    <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" />
                                    <input
                                        type="text"
                                        placeholder="Suche Gegner oder Person..."
                                        value={searchTerm}
                                        onChange={(e) => setSearchTerm(e.target.value)}
                                        className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg"
                                    />
                                </div>
                                <button onClick={() => setShowFilters(!showFilters)} className="px-4 py-3 bg-gray-100 rounded-lg">
                                    <Filter className="w-5 h-5" />
                                </button>
                            </div>
                            {showFilters && (
                                <div className="flex gap-2 flex-wrap">
                                    <button onClick={() => setSelectedCompetition('all')} className={`px-4 py-2 rounded-lg ${selectedCompetition === 'all' ? 'bg-red-600 text-white' : 'bg-gray-100 text-gray-700'}`}>Alle</button>
                                    <button onClick={() => setSelectedCompetition('Bundesliga')} className={`px-4 py-2 rounded-lg ${selectedCompetition === 'Bundesliga' ? 'bg-red-600 text-white' : 'bg-gray-100 text-gray-700'}`}>Bundesliga</button>
                                    <button onClick={() => setSelectedCompetition('Champions League')} className={`px-4 py-2 rounded-lg ${selectedCompetition === 'Champions League' ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700'}`}>Champions League</button>
                                </div>
                            )}
                        </div>

                        <div className="grid gap-4">
                            {filteredMatches.map((match) => {
                                const badgeUrl = getBadge(match.opponent);
                                return (
                                    <div key={match.id} className="bg-white rounded-xl shadow-md p-4">
                                        <div className="flex items-start justify-between mb-3">
                                            <div className="flex items-center gap-3 flex-1">
                                                {badgeUrl && <img src={badgeUrl} alt={match.opponent} className="w-8 h-8 object-contain" />}
                                                <div>
                                                    <h3 className="font-bold text-lg">{match.opponent}</h3>
                                                    <div className="flex items-center gap-2 text-sm text-gray-600 mt-1">
                                                        <Calendar className="w-4 h-4" />
                                                        <span>{formatDate(match.date)}</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <span className={`px-3 py-1 rounded-full text-xs font-semibold ${match.competition === 'Bundesliga' ? 'bg-red-500 text-white' : 'bg-blue-600 text-white'}`}>
                                                {match.competition === 'Bundesliga' ? `${match.round}. Spieltag` : match.round}
                                            </span>
                                        </div>
                                        <div className="flex items-center justify-between pt-3 border-t">
                                            <div className="flex items-center gap-3">
                                                {getAvatar(match.user)}
                                                <div>
                                                    <div className="text-sm font-semibold">{match.user}</div>
                                                    <div className="text-xs text-gray-500">{match.status === 'waitlist' ? 'Auf Warteliste' : 'Ticket zugewiesen'}</div>
                                                </div>
                                            </div>
                                            {match.status === 'waitlist' && (
                                                <span className="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-semibold">
                                                    <Clock className="w-3 h-3 inline mr-1" />Warteliste
                                                </span>
                                            )}
                                        </div>
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                </div>
            );
        };
        
        ReactDOM.render(<BayernTicketDashboard />, document.getElementById('root'));
        
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js').catch(err => console.log('SW failed:', err));
            });
        }
    </script>
</body>
</html>
